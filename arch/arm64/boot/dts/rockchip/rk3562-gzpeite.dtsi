#include <dt-bindings/gpio/gpio.h>
#include <dt-bindings/display/drm_mipi_dsi.h>
#include <dt-bindings/display/media-bus-format.h>
#include <dt-bindings/input/input.h>
#include <dt-bindings/pinctrl/rockchip.h>
#include <dt-bindings/sensor-dev.h>

#include "rk3562.dtsi"

/ {
  model = "GZPEITE RK3562 P01 Board";
  compatible = "rockchip,rk3562";

  aliases {
    mmc0 = &sdmmc0;
    mmc1 = &sdmmc1;
    mmc2 = &sdhci;
//    rtc1 = &hym8563;
  };

  chosen: chosen {
    bootargs = "earlycon=uart8250,mmio32,0xff210000 console=ttyFIQ0 loglevel=6";
  };

  fiq-debugger {
    status = "okay";
    compatible = "rockchip,fiq-debugger";
    rockchip,serial-id = <0>;
    rockchip,wake-irq = <0>;
    /* If enable uart uses irq instead of fiq */
    rockchip,irq-mode-enable = <1>;
    rockchip,baudrate = <115200>;  /* Only 115200 and 1500000 */
    interrupts = <GIC_SPI 242 IRQ_TYPE_LEVEL_HIGH>;
    pinctrl-names = "default";
    pinctrl-0 = <&uart0m0_xfer>;
  };

  dc_12v: dc-12v {
    compatible = "regulator-fixed";
    regulator-name = "dc_12v";
    regulator-always-on;
    regulator-boot-on;
    regulator-min-microvolt = <12000000>;
    regulator-max-microvolt = <12000000>;
  };

  vcc5v0_sys: vcc5v0-sys {
    compatible = "regulator-fixed";
    regulator-name = "vcc5v0_sys";
    regulator-always-on;
    regulator-boot-on;
    regulator-min-microvolt = <5000000>;
    regulator-max-microvolt = <5000000>;
    vin-supply = <&dc_12v>;
  };

  vcc3v3_sys: vcc-sys {
    compatible = "regulator-fixed";
    regulator-name = "vcc3v3_sys";
    regulator-always-on;
    regulator-boot-on;
    regulator-min-microvolt = <3300000>;
    regulator-max-microvolt = <3300000>;
    vin-supply = <&dc_12v>;
  };

  vdd_npu: vdd-npu {
    status = "okay";
    compatible = "pwm-regulator";
    pwms = <&pwm6 0 5000 1>;
    regulator-name = "vdd_npu";
    regulator-min-microvolt = <800000>;
    regulator-max-microvolt = <1100000>;
    regulator-init-microvolt = <900000>;
    regulator-always-on;
    regulator-boot-on;
    regulator-settling-time-up-us = <250>;
    pwm-supply = <&vcc5v0_sys>;
  };

  vcc3v3_lcd_n: vcc3v3-lcd0-n {
    status = "okay";
    compatible = "regulator-fixed";
    regulator-name = "vcc3v3_lcd_n";
    regulator-boot-on;
    gpio = <&gpio2 RK_PA1 GPIO_ACTIVE_HIGH>;
    enable-active-high;
    regulator-state-mem {
      regulator-off-in-suspend;
    };
  };

  sdio_pwrseq: sdio-pwrseq {
    compatible = "mmc-pwrseq-simple";
    clocks = <&rk809 1>, <&hym8563>;
    clock-names = "ext_clock", "rtc_clock";
    pinctrl-names = "default";
    pinctrl-0 = <&wifi_enable_h>;

    post-power-on-delay-ms = <200>;
    reset-gpios = <&gpio0 RK_PB3 GPIO_ACTIVE_LOW>;
  };

  wireless-wlan {
    status = "okay";
    compatible = "wlan-platdata";
    rockchip,grf = <&sys_grf>;
    wifi_chip_type = "";
  };

  wireless-bluetooth {
    status = "okay";
    compatible = "bluetooth-platdata";
    clocks = <&rk809 1>, <&hym8563>;
    clock-names = "ext_clock", "rtc_clock";
    //wifi-bt-power-toggle;
    uart_rts_gpios = <&gpio1 RK_PD3 GPIO_ACTIVE_LOW>;
    pinctrl-names = "default", "rts_gpio";
    pinctrl-0 = <&uart1m0_rtsn>, <&bt_reset_gpio>, <&bt_wake_gpio>;
    pinctrl-1 = <&uart1_gpios>;
    BT,reset_gpio    = <&gpio1 RK_PD0 GPIO_ACTIVE_HIGH>;
    BT,wake_gpio     = <&gpio4 RK_PB6 GPIO_ACTIVE_HIGH>;
  };

  adc_keys: adc-keys {
    status = "okay";
    compatible = "adc-keys";
    io-channels = <&saradc0 1>;
    io-channel-names = "buttons";
    keyup-threshold-microvolt = <1800000>;
    poll-interval = <100>;

    vol-up-key {
      linux,code = <KEY_VOLUMEUP>;
      label = "volume up";
      press-threshold-microvolt = <17000>;
    };

    vol-down-key {
      linux,code = <KEY_VOLUMEDOWN>;
      label = "volume down";
      press-threshold-microvolt = <414000>;
    };

    menu-key {
      linux,code = <KEY_MENU>;
      label = "menu";
      press-threshold-microvolt = <800000>;
    };

    back-key {
      linux,code = <KEY_BACK>;
      label = "back";
      press-threshold-microvolt = <1200000>;
    };
  };

  backlight: backlight {
    status = "okay";
    compatible = "pwm-backlight";
    brightness-levels = <
        0   1   2   3   4   5   6   7
        8   9  10  11  12  13  14  15
       16  17  18  19  20  21  22  23
       24  25  26  27  28  29  30  31
       32  33  34  35  36  37  38  39
       40  41  42  43  44  45  46  47
       48  49  50  51  52  53  54  55
       56  57  58  59  60  61  62  63
       64  65  66  67  68  69  70  71
       72  73  74  75  76  77  78  79
       80  81  82  83  84  85  86  87
       88  89  90  91  92  93  94  95
       96  97  98  99 100 101 102 103
      104 105 106 107 108 109 110 111
      112 113 114 115 116 117 118 119
      120 121 122 123 124 125 126 127
      128 129 130 131 132 133 134 135
      136 137 138 139 140 141 142 143
      144 145 146 147 148 149 150 151
      152 153 154 155 156 157 158 159
      160 161 162 163 164 165 166 167
      168 169 170 171 172 173 174 175
      176 177 178 179 180 181 182 183
      184 185 186 187 188 189 190 191
      192 193 194 195 196 197 198 199
      200 201 202 203 204 205 206 207
      208 209 210 211 212 213 214 215
      216 217 218 219 220 221 222 223
      224 225 226 227 228 229 230 231
      232 233 234 235 236 237 238 239
      240 241 242 243 244 245 246 247
      248 249 250 251 252 253 254 255
    >;
    default-brightness-level = <20>;
    pwm_min_limit   = <30>;
    pwm_max_limit   = <135>;
    enable-gpios = <&gpio0 RK_PB0 GPIO_ACTIVE_HIGH>;
//    pwms = <&pwm4 0 25000 0>;
    pwms = <&pwm4 0 25000 1>;
  };

  rk809_sound: rk809-sound {
    status = "okay";
    compatible = "rockchip,multicodecs-card";
    rockchip,card-name = "rockchip-rk809";
    hp-det-gpio = <&gpio3 RK_PD0 GPIO_ACTIVE_HIGH>;
    rockchip,format = "i2s";
    rockchip,mclk-fs = <256>;
    rockchip,cpu = <&sai0>;
    rockchip,codec = <&rk809_codec>;
    pinctrl-names = "default";
    pinctrl-0 = <&hp_det>;
  };

//  test-power {
//    status = "okay";
//  };

  hdmi_osc: hdmi-osc {
    compatible = "fixed-clock";
    clock-output-names = "hdmi-osc";
    clock-frequency = <27000000>;
    #clock-cells = <0>;
  };

  gpio_uboot: gpio-uboot {
    status = "okay";
    compatible = "gpio_uboot";

    pinctrl-names = "default";
    pinctrl-0 = <&uboot_gpio>;
  };

  gpio_gzpeite: gpio-gzpeite {
    status = "okay";
    compatible = "gpio_gzpeite";

    gpio0-name = "GPIO_DEBUG_LED";
    gpio0 = <&gpio3 RK_PB0 1>;  // 104

    gpio1-name = "GPIO_4G_RESET";
    gpio1 = <&gpio1 RK_PD7 1>;  // 63

    gpio2-name = "GPIO_USER_05";
    gpio2 = <&gpio0 RK_PC4 0>;  // 20

    gpio3-name = "GPIO_USER_07";
    gpio3 = <&gpio0 RK_PC2 0>;  // 18

    gpio4-name = "GPIO_USER_09";
    gpio4 = <&gpio1 RK_PC7 0>;  // 55

    gpio5-name = "GPIO_USER_10";
    gpio5 = <&gpio4 RK_PB0 0>;  // 136

    gpio6-name = "GPIO_USER_11";
    gpio6 = <&gpio0 RK_PC3 0>;  // 19

    gpio7-name = "GPIO_USER_13";
    gpio7 = <&gpio0 RK_PC5 0>;  // 21

//    //��CAN0���ܸ���
//    gpio8-name = "GPIO_USER_12";
//    gpio8 = <&gpio0 RK_PC6 0>;  // 22
//
//    gpio9-name = "GPIO_USER_14";
//    gpio9 = <&gpio0 RK_PC7 0>;  // 23
//
//    //��PN7160 NFC���ܸ���
//    gpio10-name = "GPIO_USER_01";
//    gpio10 = <&gpio2 RK_PA0 0>;  // 64
//
//    gpio11-name = "GPIO_USER_03";
//    gpio11= <&gpio3 RK_PD2 0>;  // 122
//
//    gpio12-name = "GPIO_USER_04";
//    gpio12 = <&gpio3 RK_PD3 0>;  // 123
//
//    gpio13-name = "GPIO_USER_06";
//    gpio13 = <&gpio3 RK_PC2 0>;  // 114
//
//    gpio14-name = "GPIO_USER_08";
//    gpio14 = <&gpio3 RK_PC3 0>;  // 115

    pinctrl-names = "default";
    pinctrl-0 = <&bootinit_gpio>;
  };

  panel_lvds: panel-lvds {
    status = "disabled";
    compatible = "simple-panel";
    backlight = <&backlight>;
    power-supply = <&vcc3v3_lcd_n>;
    reset-delay-ms = <20>;
    enable-delay-ms = <100>;
    prepare-delay-ms = <20>;
    unprepare-delay-ms = <20>;
    disable-delay-ms = <20>;
    //reset-gpios = <&gpio2 RK_PA0 GPIO_ACTIVE_LOW>;
    reset-gpios = <&gpio0 RK_PA7 GPIO_ACTIVE_LOW>;
    pinctrl-names = "default";
    pinctrl-0 = <&lcd_rst_gpio>;

//    bus-format = <MEDIA_BUS_FMT_RGB666_1X7X3_JEIDA>; /* jeida-18 */
//    bus-format = <MEDIA_BUS_FMT_RGB888_1X7X4_JEIDA>; /* jeida-24 */
//    bus-format = <MEDIA_BUS_FMT_RGB666_1X7X3_SPWG>; /* vesa-18 */
//    bus-format = <MEDIA_BUS_FMT_RGB888_1X7X4_SPWG>; /* vesa-24 */
    bus-format = <MEDIA_BUS_FMT_RGB888_1X7X4_SPWG>;

    display-timings {
      native-mode = <&timing0>;

      //1024*600 signal channel LVDS
      timing0: timing0 {
        clock-frequency = <55000000>;
        hactive = <1024>;
        vactive = <600>;
        hback-porch = <190>;
        hfront-porch = <130>;
        hsync-len = <100>;
        vback-porch = <23>;
        vfront-porch = <12>;
        vsync-len = <1>;
        pixelclk-active = <0>;
        hsync-active = <0>;
        vsync-active = <0>;
        de-active = <0>;
      };
    };

    ports {
      #address-cells = <1>;
      #size-cells = <0>;

      port@0 {
        reg = <0>;
        panel_in_lvds: endpoint {
          remote-endpoint = <&lvds_out_panel>;
        };
      };
    };
  };

};

&can0 {
  status = "okay";
  assigned-clocks = <&cru CLK_CAN0>;
  assigned-clock-rates = <200000000>;
  pinctrl-names = "default";
  pinctrl-0 = <&can0m2_pins>;
};

&pwm4 {
  status = "okay";
  pinctrl-0 = <&pwm4m0_pins>;
};

&pwm6 {
  status = "okay";
  pinctrl-0 = <&pwm6m0_pins>;
};

&pwm7 {
  status = "okay";
  pinctrl-names = "default";
  pinctrl-0 = <&pwm7m0_pins>;
  remote_pwm_id = <7>;

  compatible = "rockchip,remotectl-pwm";
  assigned-clocks = <&cru CLK_PMU1_PWM0>;
  assigned-clock-rates = <24000000>;
  handle_cpu_id = <1>;
  remote_support_psci = <1>;

  ir_key1 {
    rockchip,usercode = <0x4040>;
    rockchip,key_table =
      <0xf2  KEY_REPLY>,
      <0xba  KEY_BACK>,
      <0xf4  KEY_UP>,
      <0xf1  KEY_DOWN>,
      <0xef  KEY_LEFT>,
      <0xee  KEY_RIGHT>,
      <0xbd  KEY_HOME>,
      <0xea  KEY_VOLUMEUP>,
      <0xe3  KEY_VOLUMEDOWN>,
      <0xe2  KEY_SEARCH>,
      <0xb2  KEY_POWER>,
      <0xbc  KEY_MUTE>,
      <0xec  KEY_MENU>,
      <0xbf  0x190>,
      <0xe0  0x191>,
      <0xe1  0x192>,
      <0xe9  183>,
      <0xe6  248>,
      <0xe8  185>,
      <0xe7  186>,
      <0xf0  388>,
      <0xbe  0x175>;
  };

  ir_key2 {
    rockchip,usercode = <0xff00>;
    rockchip,key_table =
      <0xf9  KEY_HOME>,
      <0xbf  KEY_BACK>,
      <0xfb  KEY_MENU>,
      <0xaa  KEY_REPLY>,
      <0xb9  KEY_UP>,
      <0xe9  KEY_DOWN>,
      <0xb8  KEY_LEFT>,
      <0xea  KEY_RIGHT>,
      <0xeb  KEY_VOLUMEDOWN>,
      <0xef  KEY_VOLUMEUP>,
      <0xf7  KEY_MUTE>,
      <0xe7  KEY_POWER>,
      <0xfc  KEY_POWER>,
      <0xa9  KEY_VOLUMEDOWN>,
      <0xa8  KEY_VOLUMEDOWN>,
      <0xe0  KEY_VOLUMEDOWN>,
      <0xa5  KEY_VOLUMEDOWN>,
      <0xab  183>,
      <0xb7  388>,
      <0xe8  388>,
      <0xf8  184>,
      <0xaf  185>,
      <0xed  KEY_VOLUMEDOWN>,
      <0xee  186>,
      <0xb3  KEY_VOLUMEDOWN>,
      <0xf1  KEY_VOLUMEDOWN>,
      <0xf2  KEY_VOLUMEDOWN>,
      <0xf3  KEY_SEARCH>,
      <0xb4  KEY_VOLUMEDOWN>,
      <0xbe  KEY_SEARCH>;
  };

  ir_key3 {
    rockchip,usercode = <0x1dcc>;
    rockchip,key_table =
      <0xee  KEY_REPLY>,
      <0xf0  KEY_BACK>,
      <0xf8  KEY_UP>,
      <0xbb  KEY_DOWN>,
      <0xef  KEY_LEFT>,
      <0xed  KEY_RIGHT>,
      <0xfc  KEY_HOME>,
      <0xf1  KEY_VOLUMEUP>,
      <0xfd  KEY_VOLUMEDOWN>,
      <0xb7  KEY_SEARCH>,
      <0xff  KEY_POWER>,
      <0xf3  KEY_MUTE>,
      <0xbf  KEY_MENU>,
      <0xf9  0x191>,
      <0xf5  0x192>,
      <0xb3  388>,
      <0xbe  KEY_1>,
      <0xba  KEY_2>,
      <0xb2  KEY_3>,
      <0xbd  KEY_4>,
      <0xf9  KEY_5>,
      <0xb1  KEY_6>,
      <0xfc  KEY_7>,
      <0xf8  KEY_8>,
      <0xb0  KEY_9>,
      <0xb6  KEY_0>,
      <0xb5  KEY_BACKSPACE>;
  };
};

&rknpu {
  status = "okay";
  rknpu-supply = <&vdd_npu>;
};

&rknpu_mmu {
  status = "okay";
};

&rkvdec {
  status = "okay";
};

&rkvdec_mmu {
  status = "okay";
};

&rkvenc {
  status = "okay";
  venc-supply = <&vdd_logic>;
};

&rkvenc_mmu {
  status = "okay";
};

&jpegd {
  status = "okay";
};

&jpegd_mmu {
  status = "okay";
};

&mpp_srv {
  status = "okay";
};

&rga2 {
  status = "okay";
};

&rga2_mmu {
  status = "okay";
};

&cpu0 {
  cpu-supply = <&vdd_cpu>;
};

&dfi {
  status = "okay";
};

&dmc {
  status = "okay";
  center-supply = <&vdd_logic>;
};

&display_subsystem {
  status = "okay";
};

&dsi {
  status = "okay";
  //rockchip,lane-rate = <1000>;

  dsi_panel: panel@0 {
    status = "okay";
    compatible = "simple-panel-dsi";
    reg = <0>;
    power-supply = <&vcc3v3_lcd_n>;
    backlight = <&backlight>;
    reset-gpios = <&gpio2 RK_PA0 GPIO_ACTIVE_LOW>;
    pinctrl-names = "default";
    pinctrl-0 = <&lcd_rst_gpio>;
    reset-delay-ms = <60>;
    init-delay-ms = <200>;
    dsi,flags = <(MIPI_DSI_MODE_VIDEO | MIPI_DSI_MODE_VIDEO_BURST |  MIPI_DSI_MODE_LPM | MIPI_DSI_MODE_EOT_PACKET)>;
    dsi,format = <MIPI_DSI_FMT_RGB888>;
    dsi,lanes  = <4>;

    panel-init-sequence = [
      // MIPI 10.1(40P)
      15 00 02 E0 00
      15 00 02 E1 93
      15 00 02 E2 65
      15 00 02 E3 F8
      15 00 02 80 03
      15 00 02 E0 01
      15 00 02 00 00
      15 00 02 01 38
      15 00 02 03 10
      15 00 02 04 38
      15 00 02 0C 74
      15 00 02 17 00
      15 00 02 18 AF
      15 00 02 19 00
      15 00 02 1A 00
      15 00 02 1B AF
      15 00 02 1C 00
      15 00 02 35 26
      15 00 02 37 09
      15 00 02 38 04
      15 00 02 39 00
      15 00 02 3A 01
      15 00 02 3C 78
      15 00 02 3D FF
      15 00 02 3E FF
      15 00 02 3F 7F
      15 00 02 40 06
      15 00 02 41 A0
      15 00 02 42 81
      15 00 02 43 1E
      15 00 02 44 0D
      15 00 02 45 28
      15 00 02 55 02
      15 00 02 57 69
      15 00 02 59 0A
      15 00 02 5A 2A
      15 00 02 5B 17
      15 00 02 5D 7F
      15 00 02 5E 6A
      15 00 02 5F 5B
      15 00 02 60 4F
      15 00 02 61 4A
      15 00 02 62 3D
      15 00 02 63 41
      15 00 02 64 2A
      15 00 02 65 44
      15 00 02 66 43
      15 00 02 67 44
      15 00 02 68 62
      15 00 02 69 52
      15 00 02 6A 59
      15 00 02 6B 4C
      15 00 02 6C 48
      15 00 02 6D 3A
      15 00 02 6E 26
      15 00 02 6F 00
      15 00 02 70 7F
      15 00 02 71 6A
      15 00 02 72 5B
      15 00 02 73 4F
      15 00 02 74 4A
      15 00 02 75 3D
      15 00 02 76 41
      15 00 02 77 2A
      15 00 02 78 44
      15 00 02 79 43
      15 00 02 7A 44
      15 00 02 7B 62
      15 00 02 7C 52
      15 00 02 7D 59
      15 00 02 7E 4C
      15 00 02 7F 48
      15 00 02 80 3A
      15 00 02 81 26
      15 00 02 82 00
      15 00 02 E0 02
      15 00 02 00 42
      15 00 02 01 42
      15 00 02 02 40
      15 00 02 03 40
      15 00 02 04 5E
      15 00 02 05 5E
      15 00 02 06 5F
      15 00 02 07 5F
      15 00 02 08 5F
      15 00 02 09 57
      15 00 02 0A 57
      15 00 02 0B 77
      15 00 02 0C 77
      15 00 02 0D 47
      15 00 02 0E 47
      15 00 02 0F 45
      15 00 02 10 45
      15 00 02 11 4B
      15 00 02 12 4B
      15 00 02 13 49
      15 00 02 14 49
      15 00 02 15 5F
      15 00 02 16 41
      15 00 02 17 41
      15 00 02 18 40
      15 00 02 19 40
      15 00 02 1A 5E
      15 00 02 1B 5E
      15 00 02 1C 5F
      15 00 02 1D 5F
      15 00 02 1E 5F
      15 00 02 1F 57
      15 00 02 20 57
      15 00 02 21 77
      15 00 02 22 77
      15 00 02 23 46
      15 00 02 24 46
      15 00 02 25 44
      15 00 02 26 44
      15 00 02 27 4A
      15 00 02 28 4A
      15 00 02 29 48
      15 00 02 2A 48
      15 00 02 2B 5F
      15 00 02 2C 01
      15 00 02 2D 01
      15 00 02 2E 00
      15 00 02 2F 00
      15 00 02 30 1F
      15 00 02 31 1F
      15 00 02 32 1E
      15 00 02 33 1E
      15 00 02 34 1F
      15 00 02 35 17
      15 00 02 36 17
      15 00 02 37 37
      15 00 02 38 37
      15 00 02 39 08
      15 00 02 3A 08
      15 00 02 3B 0A
      15 00 02 3C 0A
      15 00 02 3D 04
      15 00 02 3E 04
      15 00 02 3F 06
      15 00 02 40 06
      15 00 02 41 1F
      15 00 02 42 02
      15 00 02 43 02
      15 00 02 44 00
      15 00 02 45 00
      15 00 02 46 1F
      15 00 02 47 1F
      15 00 02 48 1E
      15 00 02 49 1E
      15 00 02 4A 1F
      15 00 02 4B 17
      15 00 02 4C 17
      15 00 02 4D 37
      15 00 02 4E 37
      15 00 02 4F 09
      15 00 02 50 09
      15 00 02 51 0B
      15 00 02 52 0B
      15 00 02 53 05
      15 00 02 54 05
      15 00 02 55 07
      15 00 02 56 07
      15 00 02 57 1F
      15 00 02 58 40
      15 00 02 5B 30
      15 00 02 5C 00
      15 00 02 5D 34
      15 00 02 5E 05
      15 00 02 5F 02
      15 00 02 63 00
      15 00 02 64 6A
      15 00 02 67 73
      15 00 02 68 07
      15 00 02 69 08
      15 00 02 6A 6A
      15 00 02 6B 08
      15 00 02 6C 00
      15 00 02 6D 00
      15 00 02 6E 00
      15 00 02 6F 88
      15 00 02 75 FF
      15 00 02 77 DD
      15 00 02 78 2C
      15 00 02 79 15
      15 00 02 7A 17
      15 00 02 7D 14
      15 00 02 7E 82
      15 00 02 E0 04
      15 00 02 00 0E
      15 00 02 02 B3
      15 00 02 09 61
      15 00 02 0E 48
      15 00 02 37 58
      15 00 02 E0 00
      15 00 02 E6 02
      15 00 02 E7 0C
      05 C8 01 11
      15 00 02 E0 00
      05 14 01 29

//      //CS5523 mipi to eDP(1080p)
//      29 00 03 FF 3A 5A
//      29 00 03 80 10 00
//      29 00 03 2A 10 02
//      29 00 03 C6 01 10
//      29 00 03 C7 01 27
//      29 00 03 D0 01 38
//      29 00 03 D1 01 04
//      29 00 03 D2 01 04
//      29 00 03 D3 01 05
//      29 00 03 D4 01 24
//      29 00 03 D7 01 80
//      29 00 03 D8 01 07
//      29 00 03 D9 01 58
//      29 00 03 DA 01 00
//      29 00 03 DB 01 2C
//      29 00 03 DC 01 00
//      29 00 03 DE 01 94
//      29 00 03 DF 01 00
//      29 00 03 24 2B 04
//      29 00 03 CE 01 00
//      29 00 03 6C 10 C4
//      29 00 03 6D 10 09
//      29 00 03 6E 10 00
//      29 00 03 69 10 E2
//      29 00 03 6A 10 04
//      29 00 03 6B 10 00
//      29 00 03 C4 10 F0
//      29 00 03 C0 10 00
//      29 00 03 C1 10 01
//      29 00 03 C2 10 02
//      29 00 03 C3 10 03
//      29 00 03 DA 10 FF
//      29 00 03 DB 10 6B
//      29 00 03 34 10 07
//      29 00 03 A4 2B 00
//      29 00 03 34 10 06
//      29 00 03 80 2B 0A
//      29 00 03 34 10 06
//      29 00 03 84 2B 02
//      29 00 03 00 0F 33
//      29 00 03 0A 05 80
//      29 00 03 18 0F 00
//      29 00 03 2B 05 40
//      29 14 03 CF 01 A5
//      29 14 03 CF 01 A5

//      //CS5518 mipi to LVDS(1080p)
//      29 00 03 FF 3A 5A
//      29 00 03 00 0F 01
//      29 00 03 2C 05 05
//      29 00 03 D8 10 01
//      29 00 03 12 0F 00
//      29 00 03 0C 05 03
//      29 00 03 0A 05 80
//      29 00 03 25 0F 13
//      29 00 03 21 0F 04
//      29 00 03 06 10 1C
//      29 00 03 07 10 00
//      29 00 03 08 10 00
//      29 00 03 09 10 00
//      29 00 03 01 10 03
//      29 00 03 03 10 00
//      29 00 03 00 10 18
//      29 00 03 01 0F 20
//      29 00 03 02 0F 00
//      29 00 03 03 0F 70
//      29 00 03 00 2C 83
//      29 00 03 02 2C 01
//      29 00 03 1C 05 03
//      29 00 03 1D 05 C0
//      29 00 03 0B 05 10
//      29 00 03 24 05 02
//      29 00 03 28 05 00
//      29 00 03 81 10 38
//      29 00 03 82 10 04
//      29 00 03 18 0F 00
//      29 00 03 2B 05 40
//      29 00 03 83 10 C0
//      29 00 03 84 10 03
//      29 00 03 85 10 4C
//      29 00 03 86 10 04
//      29 00 03 87 10 2C
//      29 00 03 88 10 00
//      29 00 03 89 10 16
//      29 00 03 8A 10 00
//      29 00 03 8B 10 4A
//      29 00 03 8C 10 00
//      29 00 03 8D 10 04
//      29 00 03 8E 10 05
//      29 00 03 8F 10 24
//      29 00 03 80 10 00
//      29 14 03 22 10 DB
//      29 14 03 22 10 FB
//      29 14 03 0D 10 01

//      //CS5518 mipi to LVDS(1024x600)
//      29 00 03 FF 3A 5A
//      29 00 03 00 0F 01
//      29 00 03 2C 05 05
//      29 00 03 D8 10 01
//      29 00 03 12 0F 00
//      29 00 03 0C 05 03
//      29 00 03 0A 05 80
//      29 00 03 25 0F 11
//      29 00 03 21 0F 04
//      29 00 03 06 10 12
//      29 00 03 07 10 AA
//      29 00 03 08 10 C0
//      29 00 03 09 10 83
//      29 00 03 01 10 03
//      29 00 03 03 10 00
//      29 00 03 00 10 18
//      29 00 03 01 0F 20
//      29 00 03 02 0F 00
//      29 00 03 03 0F 70
//      29 00 03 00 2C 81
//      29 00 03 02 2C 01
//      29 00 03 1C 05 02
//      29 00 03 1D 05 00
//      29 00 03 0B 05 10
//      29 00 03 24 05 02
//      29 00 03 28 05 00
//      29 00 03 81 10 58
//      29 00 03 82 10 02
//      29 00 03 18 0F 00
//      29 00 03 2B 05 40
//      29 00 03 83 10 00
//      29 00 03 84 10 02
//      29 00 03 85 10 A0
//      29 00 03 86 10 02
//      29 00 03 87 10 46
//      29 00 03 88 10 00
//      29 00 03 89 10 0A
//      29 00 03 8A 10 00
//      29 00 03 8B 10 50
//      29 00 03 8C 10 00
//      29 00 03 8D 10 0A
//      29 00 03 8E 10 05
//      29 00 03 8F 10 14
//      29 00 03 80 10 00
//      29 14 03 22 10 DB
//      29 14 03 22 10 FB
//      29 14 03 0D 10 01

    ];

    panel-exit-sequence = [
      05 00 01 28
      05 00 01 10
    ];

    disp_timings0: display-timings {
      native-mode = <&dsi_timing0>;

      dsi_timing0: timing0 {

//        clock-frequency = <72000000>;
        clock-frequency = <90000000>;
        hactive = <800>;
        vactive = <1280>;
        hback-porch = <60>;
        hfront-porch = <20>;
        hsync-len = <40>;
        vback-porch = <20>;
        vfront-porch = <30>;
        vsync-len = <4>;
        hsync-active = <0>;
        vsync-active = <0>;
        de-active = <0>;
        pixelclk-active = <0>;

////        clock-frequency = <148500000>; // mipi t0 edp
//        clock-frequency = <100000000>;
//        hactive = <1920>;
//        vactive = <1080>;
//        hback-porch = <148>;
//        hfront-porch = <88>;
//        hsync-len = <44>;
//        vback-porch = <36>;
//        vfront-porch = <4>;
//        vsync-len = <5>;
//        hsync-active = <0>;
//        vsync-active = <0>;
//        de-active = <0>;
//        pixelclk-active = <0>;

//        clock-frequency = <51200000>;
//        hactive = <1024>;
//        vactive = <600>;
//        hback-porch = <160>;
//        hfront-porch = <140>;
//        hsync-len = <20>;
//        vback-porch = <20>;
//        vfront-porch = <10>;
//        vsync-len = <5>;
//        hsync-active = <0>;
//        vsync-active = <0>;
//        de-active = <0>;
//        pixelclk-active = <0>;

      };
    };

    ports {
      #address-cells = <1>;
      #size-cells = <0>;

      port@0 {
        reg = <0>;
        panel_in_dsi: endpoint {
          remote-endpoint = <&dsi_out_panel>;
        };
      };
    };
  };

  ports {
    #address-cells = <1>;
    #size-cells = <0>;

    port@1 {
      reg = <1>;
      dsi_out_panel: endpoint {
        remote-endpoint = <&panel_in_dsi>;
      };
    };
  };

};

&gpu {
  status = "okay";
  mali-supply = <&vdd_gpu>;
};

&video_phy {
  status = "okay";
};

&dsi_in_vp0 {
  status = "okay";
};

&lvds_in_vp0 {
  status = "disabled";
};

&route_dsi {
  status = "okay";
};

&route_lvds {
  status = "disabled";
};

&lvds {
  status = "disabled";

  ports {
    port@1 {
      reg = <1>;

      lvds_out_panel: endpoint {
        remote-endpoint = <&panel_in_lvds>;
      };
    };
  };
};

&i2c0 {
  status = "okay";

  rk809: pmic@20 {
    status = "okay";
    compatible = "rockchip,rk809";
    reg = <0x20>;
    interrupt-parent = <&gpio0>;
    interrupts = <3 IRQ_TYPE_LEVEL_LOW>;

    pinctrl-names = "default", "pmic-sleep",
      "pmic-power-off", "pmic-reset";
    pinctrl-0 = <&pmic_int>;
    pinctrl-1 = <&soc_slppin_slp>, <&rk817_slppin_slp>;
    pinctrl-2 = <&soc_slppin_gpio>, <&rk817_slppin_pwrdn>;
    pinctrl-3 = <&soc_slppin_gpio>, <&rk817_slppin_rst>;
    rockchip,system-power-controller;
    wakeup-source;
    #clock-cells = <1>;
    clock-output-names = "rk808-clkout1", "rk808-clkout2";
    /* 1: rst regs (default in codes), 0: rst the pmic */
    pmic-reset-func = <0>;
    /* not save the PMIC_POWER_EN register in uboot */
    not-save-power-en = <1>;

    vcc1-supply = <&vcc3v3_sys>;
    vcc2-supply = <&vcc3v3_sys>;
    vcc3-supply = <&vcc3v3_sys>;
    vcc4-supply = <&vcc3v3_sys>;
    vcc5-supply = <&vcc3v3_sys>;
    vcc6-supply = <&vcc3v3_sys>;
    vcc7-supply = <&vcc3v3_sys>;
    vcc8-supply = <&vcc3v3_sys>;
    vcc9-supply = <&vcc3v3_sys>;

    pwrkey {
      status = "okay";
    };

    pinctrl_rk8xx: pinctrl_rk8xx {
      gpio-controller;
      #gpio-cells = <2>;

      rk817_slppin_null: rk817_slppin_null {
        pins = "gpio_slp";
        function = "pin_fun0";
      };

      rk817_slppin_slp: rk817_slppin_slp {
        pins = "gpio_slp";
        function = "pin_fun1";
      };

      rk817_slppin_pwrdn: rk817_slppin_pwrdn {
        pins = "gpio_slp";
        function = "pin_fun2";
      };

      rk817_slppin_rst: rk817_slppin_rst {
        pins = "gpio_slp";
        function = "pin_fun3";
      };
    };

    regulators {
      vdd_logic: DCDC_REG1 {
        regulator-always-on;
        regulator-boot-on;
        regulator-min-microvolt = <500000>;
        regulator-max-microvolt = <1350000>;
        regulator-init-microvolt = <950000>;
        regulator-ramp-delay = <6001>;
        regulator-initial-mode = <0x2>;
        regulator-name = "vdd_logic";
        regulator-state-mem {
          regulator-off-in-suspend;
        };
      };

      vdd_cpu: DCDC_REG2 {
        regulator-always-on;
        regulator-boot-on;
        regulator-min-microvolt = <500000>;
        regulator-max-microvolt = <1350000>;
        regulator-init-microvolt = <1050000>;
        regulator-ramp-delay = <6001>;
        regulator-initial-mode = <0x2>;
        regulator-name = "vdd_cpu";
        regulator-state-mem {
          regulator-off-in-suspend;
        };
      };

      vcc_ddr: DCDC_REG3 {
        regulator-always-on;
        regulator-boot-on;
        regulator-initial-mode = <0x2>;
        regulator-name = "vcc_ddr";
        regulator-state-mem {
          regulator-on-in-suspend;
        };
      };

      vdd_gpu: DCDC_REG4 {
        regulator-always-on;
        regulator-boot-on;
        regulator-min-microvolt = <500000>;
        regulator-max-microvolt = <1350000>;
        regulator-init-microvolt = <900000>;
        regulator-ramp-delay = <6001>;
        regulator-initial-mode = <0x2>;
        regulator-name = "vdd_gpu";
        regulator-state-mem {
          regulator-off-in-suspend;
        };
      };

      vcc2v8_dvp: LDO_REG1 {
        regulator-min-microvolt = <2800000>;
        regulator-max-microvolt = <2800000>;
        regulator-name = "vcc2v8_dvp";
        regulator-state-mem {
          regulator-off-in-suspend;
        };
      };

      vdda_0v9: LDO_REG2 {
        regulator-always-on;
        regulator-boot-on;
        regulator-min-microvolt = <900000>;
        regulator-max-microvolt = <900000>;
        regulator-name = "vdda_0v9";
        regulator-state-mem {
          regulator-off-in-suspend;
        };
      };

      vdda0v9_pmu: LDO_REG3 {
        regulator-always-on;
        regulator-boot-on;
        regulator-min-microvolt = <900000>;
        regulator-max-microvolt = <900000>;
        regulator-name = "vdda0v9_pmu";
        regulator-state-mem {
        regulator-on-in-suspend;
          regulator-suspend-microvolt = <900000>;
        };
      };

      vccio_acodec: LDO_REG4 {
        regulator-always-on;
        regulator-boot-on;
        regulator-min-microvolt = <3000000>;
        regulator-max-microvolt = <3000000>;
        regulator-name = "vccio_acodec";
        regulator-state-mem {
          regulator-off-in-suspend;
        };
      };

      vccio_sd: LDO_REG5 {
        regulator-always-on;
        regulator-boot-on;
        regulator-min-microvolt = <1800000>;
        regulator-max-microvolt = <3300000>;
        regulator-name = "vccio_sd";
        regulator-state-mem {
          regulator-off-in-suspend;
        };
      };

      vcc3v3_pmu: LDO_REG6 {
        regulator-always-on;
        regulator-boot-on;
        regulator-min-microvolt = <3300000>;
        regulator-max-microvolt = <3300000>;
        regulator-name = "vcc3v3_pmu";
        regulator-state-mem {
          regulator-on-in-suspend;
          regulator-suspend-microvolt = <3300000>;
        };
      };

      vcca_1v8: LDO_REG7 {
        regulator-always-on;
        regulator-boot-on;
        regulator-min-microvolt = <1800000>;
        regulator-max-microvolt = <1800000>;
        regulator-name = "vcca_1v8";
        regulator-state-mem {
          regulator-off-in-suspend;
        };
      };

      vcca1v8_pmu: LDO_REG8 {
        regulator-always-on;
        regulator-boot-on;
        regulator-min-microvolt = <1800000>;
        regulator-max-microvolt = <1800000>;
        regulator-name = "vcca1v8_pmu";
        regulator-state-mem {
        regulator-on-in-suspend;
          regulator-suspend-microvolt = <1800000>;
        };
      };

      vcc1v8_dvp: LDO_REG9 {
        regulator-min-microvolt = <1800000>;
        regulator-max-microvolt = <1800000>;
        regulator-name = "vcc1v8_dvp";
        regulator-state-mem {
          regulator-off-in-suspend;
        };
      };

      vcc_1v8: DCDC_REG5 {
        regulator-always-on;
        regulator-boot-on;
        regulator-min-microvolt = <1800000>;
        regulator-max-microvolt = <1800000>;
        regulator-name = "vcc_1v8";
        regulator-state-mem {
          regulator-off-in-suspend;
        };
      };

      vcc_3v3: SWITCH_REG1 {
        regulator-always-on;
        regulator-boot-on;
        regulator-name = "vcc_3v3";
        regulator-state-mem {
          regulator-off-in-suspend;
        };
      };

      vcc3v3_sd: SWITCH_REG2 {
        regulator-always-on;
        regulator-boot-on;
        regulator-name = "vcc3v3_sd";
        regulator-state-mem {
          regulator-off-in-suspend;
        };
      };
    };

    rk809_codec: codec {
      status = "okay";
      #sound-dai-cells = <1>;
      compatible = "rockchip,rk809-codec", "rockchip,rk817-codec";
      clocks = <&mclkout_sai0>;
      clock-names = "mclk";
      assigned-clocks = <&mclkout_sai0>;
      assigned-clock-rates = <12288000>;
      pinctrl-names = "default";
      pinctrl-0 = <&i2s0m0_mclk>;
      hp-volume = <3>;
      spk-volume = <3>;
      spk-ctl-gpio = <&gpio3 RK_PD1 GPIO_ACTIVE_LOW>;
      use-ext-amplifier;
//      mic-in-differential;
      double_single_mic = <0>;
    };
  };

  hym8563: hym8563@51 {
    status = "okay";
    compatible = "haoyu,hym8563";
    reg = <0x51>;
    #clock-cells = <0>;
    clock-frequency = <32768>;
    clock-output-names = "hym8563";
//    pinctrl-names = "default";
//    pinctrl-0 = <&hym8563_int>;
//    interrupt-parent = <&gpio0>;
//    interrupts = <RK_PA5 IRQ_TYPE_LEVEL_LOW>;
//    wakeup-source;
  };
};

&i2c2 {
  status = "okay";
  
  gt9xx: gt9xx@14 {
    status = "disabled";
    compatible = "goodix,gt9xx";
    reg = <0x14>;
    reset-gpios = <&gpio0 RK_PA6 GPIO_ACTIVE_LOW>;
    irq-gpios = <&gpio0 RK_PA0 IRQ_TYPE_LEVEL_LOW>;
    goodix,type-a-report = <0>;
    goodix,int-sync = <1>;
    goodix,pen-suppress-finger = <0>;
    goodix,esd-protect = <0>;
    goodix,auto-update-cfg = <0>;
    goodix,resume-in-workqueue = <0>;
    goodix,power-off-sleep = <0>;
    goodix,double-wakeup = <1>;
    goodix,swap-x2y = <0>;
    goodix,revert-x = <1>;
    goodix,revert-y = <1>;
    goodix,driver-send-cfg = <0>;
    goodix,cfg-group0 = [
      82 00 04 58 02 05 3D 20 22 08 28 08 5F 41 03 05
      00 00 00 00 00 00 00 17 1A 1E 14 8C 2E 0E 99 9B
      B2 04 00 00 00 22 01 1D 00 01 00 00 00 00 00 00
      00 00 00 82 B4 9E D5 F4 07 00 00 04 89 86 00 84
      8F 00 7F 99 00 7B A3 00 77 AE 00 77 00 00 00 00
      00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
      00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
      02 04 06 08 0A 0C 0E 10 12 14 16 18 1A 1C 00 00
      00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 02
      04 06 08 0A 0C 0F 10 12 13 14 16 18 1C 1D 1E 1F
      20 21 22 24 26 28 29 2A 00 00 00 00 00 00 00 00
      00 00 00 00 00 00 00 00 AA 01
    ];
  };

  ilitek: ilitek@41 {
    status = "disabled";
    compatible = "tchip,ilitek";
    reg = <0x41>;
    ilitek,irq-gpio = <&gpio0 RK_PA0 IRQ_TYPE_LEVEL_LOW>;
    ilitek,reset-gpio = <&gpio0 RK_PA6 GPIO_ACTIVE_LOW>;
    ilitek,name = "ilitek_i2c";
    ilitek,double-wakeup = <1>;
    ilitek,swap-x2y = <0>;
    ilitek,revert-x = <0>;
    ilitek,revert-y = <0>;
  };

  lt9211: lt9211@2d {
    status = "disabled";
    compatible = "lontium,lt9211c";
    reg = <0x2d>;
    reset-gpios = <&gpio0 RK_PA7 GPIO_ACTIVE_HIGH>;

  };

  atmel: atmel@4a {
    status = "disabled";
		compatible = "atmel,atmel_mxt_ts";
		reg = <0x4a>;
		interrupt-parent = <&gpio0>;
		interrupts = <RK_PA0 IRQ_TYPE_EDGE_FALLING>;
    pinctrl-names = "default";
		pinctrl-0 = <&pinctrl_mxt_irq>;
    reset-gpios = <&gpio0 RK_PA6 GPIO_ACTIVE_LOW>;
	};

};

&i2c5 {
  status = "okay";
  pinctrl-names = "default";
  pinctrl-0 = <&i2c5m0_xfer>;

  nxpnfc: nxpnfc@28 {
    status = "disabled";
    compatible = "nxp,nxpnfc";
    reg = <0x28>;
    nxp,nxpnfc-irq = <&gpio2 RK_PA0 GPIO_ACTIVE_LOW>;
    nxp,nxpnfc-ven = <&gpio3 RK_PD2 GPIO_ACTIVE_HIGH>;
    nxp,nxpnfc-fw-dwnld = <&gpio3 RK_PD3 GPIO_ACTIVE_HIGH>;
  };
};

&saradc0 {
  status = "okay";
  vref-supply = <&vcc_1v8>;
};

&saradc1 {
  status = "okay";
  vref-supply = <&vcc_1v8>;
};

&tsadc {
  status = "okay";
};

// EMMC
&sdhci {
  status = "okay";
  bus-width = <8>;
  no-sdio;
  no-sd;
  non-removable;
  max-frequency = <200000000>;
  mmc-hs400-1_8v;
  mmc-hs400-enhanced-strobe;
  full-pwr-cycle-in-suspend;
};

// TF��
&sdmmc0 {
  status = "okay";
  no-sdio;
  no-mmc;
  bus-width = <4>;
  cap-mmc-highspeed;
  cap-sd-highspeed;
  disable-wp;
  sd-uhs-sdr104;
  vmmc-supply = <&vcc3v3_sd>;
  vqmmc-supply = <&vccio_sd>;
  pinctrl-names = "default";
  pinctrl-0 = <&sdmmc0_bus4 &sdmmc0_clk &sdmmc0_cmd &sdmmc0_det>;
};

// WIFI
&sdmmc1 {
  status = "okay";
  max-frequency = <150000000>;
  no-sd;
  no-mmc;
  bus-width = <4>;
  disable-wp;
  cap-sd-highspeed;
  cap-sdio-irq;
  keep-power-in-suspend;
  mmc-pwrseq = <&sdio_pwrseq>;
  non-removable;
  pinctrl-names = "default";
  pinctrl-0 = <&sdmmc1_bus4 &sdmmc1_cmd &sdmmc1_clk>;
  sd-uhs-sdr104;
};

&mdio0 {
  status = "okay";
  rgmii_phy: phy@1 {
    compatible = "ethernet-phy-ieee802.3-c22";
    reg = <0x1>;
    clocks = <&cru CLK_GMAC_ETH_OUT2IO>;
    assigned-clocks = <&cru CLK_GMAC_ETH_OUT2IO>;
    assigned-clock-rates = <25000000>;
  };
};

&gmac0 {
  status = "okay";
  /* Use rgmii-rxid mode to disable rx delay inside Soc */
  phy-mode = "rgmii-rxid";
  clock_in_out = "output";

  snps,reset-gpio = <&gpio0 RK_PB4 GPIO_ACTIVE_LOW>;
  snps,reset-active-low;
  /* Reset time is 20ms, 100ms for rtl8211f */
  snps,reset-delays-us = <0 20000 100000>;

  tx_delay = <0x44>;

  pinctrl-names = "default";
  pinctrl-0 = <&rgmiim0_miim &rgmiim0_tx_bus2 &rgmiim0_rx_bus2 &rgmiim0_rgmii_clk &rgmiim0_rgmii_bus &ethm0_pins>;
  max-speed = <1000>;
//  max-speed = <100>;
  phy-handle = <&rgmii_phy>;
};

// USB 2.0 1��
&u2phy {
  status = "okay";
};

&u2phy_host {
  status = "okay";
};

&usb_host0_ehci {
  status = "okay";
};

&usb_host0_ohci {
  status = "okay";
};

// USB OTG 1��
&usbdrd30 {
  status = "okay";
};

&u2phy_otg {
  status = "okay";
};

// USB3.0 �� PCIE ʱ�����
&combphy_pu {
  status = "okay";
};

&usbdrd_dwc3 {
  status = "okay";
  dr_mode = "otg";
  extcon = <&u2phy>;
  snps,dis_u2_susphy_quirk;
  snps,usb2-lpm-disable;

  //USB 3.0
  phy-names = "usb2-phy", "usb3-phy";
  phys = <&u2phy_otg>, <&combphy_pu PHY_TYPE_USB3>;

  //USB 2.0 Only
//  maximum-speed = "high-speed";
//  phys = <&u2phy_otg>;
//  phy-names = "usb2-phy";
};

// PCIE 2.0 1������USB3.0 �źŸ��ã�����ͬʱ��
&pcie2x1 {
  status = "disabled";
  reset-gpios = <&gpio3 RK_PB0 GPIO_ACTIVE_HIGH>;
};

&vop {
  status = "okay";
  //support-multi-area;
};

&vop_mmu {
  status = "okay";
};

&rng {
  status = "okay";
};

&sai0 {
  status = "okay";
  pinctrl-names = "default";
  pinctrl-0 = <&i2s0m0_lrck &i2s0m0_sclk &i2s0m0_sdi0 &i2s0m0_sdo0>;
};

&wdt {
  status = "okay";
};

&uart0 {
  status = "disabled";
  pinctrl-names = "default";
  pinctrl-0 = <&uart0m0_xfer>;
};

&uart1 {
  status = "okay";
  pinctrl-names = "default";
  pinctrl-0 = <&uart1m0_xfer &uart1m0_ctsn>;
};

&uart2 {
  status = "okay";
  pinctrl-names = "default";
  pinctrl-0 = <&uart2m1_xfer>;
};

&uart3 {
  status = "okay";
  pinctrl-names = "default";
  pinctrl-0 = <&uart3m0_xfer>;
};

&uart4 {
  status = "okay";
  pinctrl-names = "default";
  pinctrl-0 = <&uart4m1_xfer>;
};

&uart5 {
  status = "okay";
  pinctrl-names = "default";
  pinctrl-0 = <&uart5m1_xfer>;
};

&uart6 {
  status = "disabled";
  pinctrl-names = "default";
  pinctrl-0 = <&uart6m0_xfer>;
};

&uart7 {
  status = "okay";
  pinctrl-names = "default";
  pinctrl-0 = <&uart7m0_xfer>;
};

&uart8 {
  status = "okay";
  pinctrl-names = "default";
  pinctrl-0 = <&uart8m0_xfer>;
};

&uart9 {
  status = "disabled";
  pinctrl-names = "default";
  pinctrl-0 = <&uart9m1_xfer>;
};

// ����ͷ
&i2c4 {
  status = "disabled";
  pinctrl-0 = <&i2c4m0_xfer>;

  tc358743: tc358743@f {
    status = "disabled";
    compatible = "toshiba,tc358743";
    reg = <0x0f>;
    clocks = <&hdmi_osc>;
    clock-names = "refclk";
    interrupt-parent = <&gpio3>;
    interrupts = <RK_PC0 IRQ_TYPE_LEVEL_HIGH>;
    reset-gpios = <&gpio3 RK_PC5 GPIO_ACTIVE_LOW>;
    pinctrl-names = "default";
    pinctrl-0 = <&hdmiin_gpios>;
    rockchip,camera-module-index = <0>;
    rockchip,camera-module-facing = "back";
    rockchip,camera-module-name = "TC358743";
    rockchip,camera-module-lens-name = "NC";

    port {
      tc358743_out: endpoint {
        remote-endpoint = <&tc358743_in>;
        data-lanes = <1 2 3 4>;
        clock-noncontinuous;
        link-frequencies = /bits/ 64 <297000000>;
      };
    };
  };

  ov13850: ov13850@10 {
    status = "disabled";
    compatible = "ovti,ov13850";
    reg = <0x10>;
    clocks = <&cru CLK_CAM2_OUT2IO>;
    clock-names = "xvclk";
    pinctrl-names = "default", "rockchip,camera_default";
    pinctrl-0 = <&cam_clk2_out>, <&camera_gpios>;
    reset-gpios = <&gpio3 RK_PC6 GPIO_ACTIVE_HIGH>;
    pwdn-gpios = <&gpio3 RK_PC1 GPIO_ACTIVE_HIGH>;
    /* avdd-supply = <>; */
    /* dvdd-supply = <>; */
    /* dovdd-supply = <>; */
    rockchip,camera-module-index = <0>;
    rockchip,camera-module-facing = "back";
    rockchip,camera-module-name = "GZPEITE";
    rockchip,camera-module-lens-name = "default";
    port {
      ov13850_out: endpoint {
        remote-endpoint = <&ov13850_in>;
        data-lanes = <1 2>;
      };
    };
  };
};

&csi2_dphy0 {
  status = "okay";

  ports {
    #address-cells = <1>;
    #size-cells = <0>;
    port@0 {
      reg = <0>;
      #address-cells = <1>;
      #size-cells = <0>;

      tc358743_in: endpoint@1 {
        reg = <1>;
        remote-endpoint = <&tc358743_out>;
        data-lanes = <1 2 3 4>;
      };

      ov13850_in: endpoint@2 {
        reg = <2>;
        remote-endpoint = <&ov13850_out>;
        data-lanes = <1 2>;
      };
    };

    port@1 {
      reg = <1>;
      #address-cells = <1>;
      #size-cells = <0>;

      csidphy0_out: endpoint@0 {
        reg = <0>;
        remote-endpoint = <&mipi0_csi2_input>;
      };
    };
  };
};

&mipi0_csi2 {
  status = "okay";

  ports {
    #address-cells = <1>;
    #size-cells = <0>;

    port@0 {
      reg = <0>;
      #address-cells = <1>;
      #size-cells = <0>;

      mipi0_csi2_input: endpoint@1 {
        reg = <1>;
        remote-endpoint = <&csidphy0_out>;
      };
    };

    port@1 {
      reg = <1>;
      #address-cells = <1>;
      #size-cells = <0>;

      mipi0_csi2_output: endpoint@0 {
        reg = <0>;
        remote-endpoint = <&cif_mipi_in0>;
      };
    };
  };
};

&rkcif_mipi_lvds {
  status = "okay";

  port {
    cif_mipi_in0: endpoint {
      remote-endpoint = <&mipi0_csi2_output>;
    };
  };
};

&rkcif_mipi_lvds_sditf {
  status = "okay";

  port {
    mipi_lvds_sditf: endpoint {
      remote-endpoint = <&isp_vir0>;
    };
  };
};

&rkisp_vir0 {
  status = "okay";

  port {
    #address-cells = <1>;
    #size-cells = <0>;

    isp_vir0: endpoint@0 {
      reg = <0>;
      remote-endpoint = <&mipi_lvds_sditf>;
    };
  };
};

&rkisp {
  status = "okay";
};

&rkisp_mmu {
  status = "okay";
};

&rkcif {
  status = "okay";
};

&rkcif_mmu {
  status = "okay";
};

&csi2_dphy0_hw {
  status = "okay";
};

&pinctrl {
  bootinit {
    uboot_gpio: uboot-gpio {
      rockchip,pins =
        <3 RK_PB0 RK_FUNC_GPIO &pcfg_output_low>,
        <1 RK_PD7 RK_FUNC_GPIO &pcfg_output_high>;
    };

    bootinit_gpio: bootinit-gpio {
      rockchip,pins =
        <3 RK_PB0 RK_FUNC_GPIO &pcfg_output_high>,
        <1 RK_PD7 RK_FUNC_GPIO &pcfg_output_high>;
    };
  };

  headphone {
    hp_det: hp-det {
      rockchip,pins = <3 RK_PD0 RK_FUNC_GPIO &pcfg_pull_none>;
    };
  };

  lcd {
    lcd_rst_gpio: lcd-rst-gpio {
      rockchip,pins = <0 RK_PA7 RK_FUNC_GPIO &pcfg_pull_none>;
    };
  };

  sdio-pwrseq {
    wifi_enable_h: wifi-enable-h {
      rockchip,pins = <0 RK_PB3 RK_FUNC_GPIO &pcfg_pull_none>;
    };
  };

  wireless-bluetooth {
    uart1_gpios: uart1-gpios {
      rockchip,pins = <1 RK_PD3 RK_FUNC_GPIO &pcfg_pull_none>;
    };

    bt_reset_gpio: bt-reset-gpio {
      rockchip,pins = <1 RK_PD0 RK_FUNC_GPIO &pcfg_pull_none>;
    };

    bt_wake_gpio: bt-wake-gpio {
      rockchip,pins = <4 RK_PB6 RK_FUNC_GPIO &pcfg_pull_none>;
    };

  };

//  hym8563 {
//    hym8563_int: hym8563-int {
//      rockchip,pins = <0 RK_PA5 RK_FUNC_GPIO &pcfg_pull_up>;
//    };
//  };

  camera {
    hdmiin_gpios: hdmiin_gpios {
      rockchip,pins =
        <3 RK_PC0 RK_FUNC_GPIO &pcfg_pull_none>,
        <3 RK_PC5 RK_FUNC_GPIO &pcfg_pull_none>;
    };

    camera_gpios: camera_gpios {
      rockchip,pins =
        <3 RK_PC6 RK_FUNC_GPIO &pcfg_output_low>,
        <3 RK_PC1 RK_FUNC_GPIO &pcfg_output_low>;
    };
  };

  touch {
    pinctrl_mxt_irq: mxt_irq {
        rockchip,pins = <0 RK_PA0 RK_FUNC_GPIO &pcfg_pull_up>;
      };
  };

};
